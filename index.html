<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Validador de Certificados - CEC ESPE SD</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <style>
    body {
      background-color: #f8f9fa;
      font-family: 'Segoe UI', sans-serif;
    }
    header img {
      max-height: 100px;
    }
    .cert-info {
      margin-top: 20px;
    }
    .footer {
      margin-top: 40px;
      text-align: center;
      font-size: 0.9rem;
      color: #666;
    }
    .loader {
      border: 6px solid #f3f3f3;
      border-radius: 50%;
      border-top: 6px solid #0d6efd;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: auto;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div class="container py-4">
    <header class="text-center mb-4">
      <img src="Logo_ESPE.png" alt="Logo ESPE" class="me-3">
      <img src="ceccrt.png" alt="Logo CEC-ESPE">
      <h2 class="mt-3">Validador de Certificados</h2>
      <h5>Centro de Educación Continua - ESPE Sede Santo Domingo</h5>
    </header>

    <div id="result" class="text-center">
      <div class="loader" id="loading"></div>
    </div>

    <div class="cert-info" id="cert-info" style="display: none;">
      <div class="alert alert-success text-center">
        <strong>Certificado válido</strong>
      </div>
      <ul class="list-group">
        <li class="list-group-item"><strong>Nombre:</strong> <span id="nombre"></span></li>
        <li class="list-group-item"><strong>Cédula:</strong> <span id="cedula"></span></li>
        <li class="list-group-item"><strong>Curso:</strong> <span id="curso"></span></li>
        <li class="list-group-item"><strong>Aprobación:</strong> <span id="aprobacion"></span></li>
        <li class="list-group-item"><strong>Horas:</strong> <span id="horas"></span></li>
        <li class="list-group-item"><strong>Fechas:</strong> <span id="fechas"></span></li>
        <li class="list-group-item"><strong>Fecha de emisión:</strong> <span id="emision"></span></li>
      </ul>
    </div>

    <div class="alert alert-danger text-center mt-4" id="not-found" style="display: none;">
      Certificado no encontrado o inválido.
    </div>

    <hr class="my-5">

    <section>
      <h4 class="text-center">📚 Próximos cursos</h4>
      <ul class="list-group list-group-flush">
        <li class="list-group-item">Excel Básico e Intermedio con el Apoyo de IA</li>
        <li class="list-group-item">Python para Análisis de Datos y Machine Learning con el Apoyo de IA</li>
      </ul>
    </section>

    <section class="mt-5">
      <h5>📩 Contacto</h5>
      <p><strong>Ing. Diego Ricardo Salazar Armijos, Ph.D</strong></p>
      <p>Correo: <a href="mailto:cec-sd@espe.edu.ec">cec-sd@espe.edu.ec</a></p>
      <p>Celular: 0993365450</p>
    </section>

    <div class="footer mt-5">
      &copy; 2025 Centro de Educación Continua - ESPE Sede Santo Domingo
    </div>
  </div>

  <script>
    const params = new URLSearchParams(window.location.search);
    const hash = params.get('hash');
    const resultDiv = document.getElementById("result");
    const loading = document.getElementById("loading");
    const notFound = document.getElementById("not-found");
    const certInfo = document.getElementById("cert-info");

    if (hash) {
      fetch('certificadoscecsd.json')
        .then(response => {
          if (!response.ok) throw new Error("Archivo no encontrado");
          return response.json();
        })
        .then(data => {
          loading.style.display = "none";
          const cert = data[hash];
          if (cert) {
            certInfo.style.display = "block";
            document.getElementById("nombre").textContent = cert.nombre;
            document.getElementById("cedula").textContent = cert.cedula;
            document.getElementById("curso").textContent = cert.curso;
            document.getElementById("aprobacion").textContent = cert.aprobacion;
            document.getElementById("horas").textContent = cert.horas;
            document.getElementById("fechas").textContent = `Del ${cert.inicio} al ${cert.fin}`;
            document.getElementById("emision").textContent = cert.emision;
          } else {
            notFound.style.display = "block";
          }
        })
        .catch(error => {
          loading.style.display = "none";
          notFound.style.display = "block";
        });
    } else {
      loading.style.display = "none";
      notFound.style.display = "block";
    }
  </script>
</body>
</html>
